# 사전 지식 - 스레드

## 스레드

- 한 프로세스 내에서 실행되는 흐름의 단위

## 프로그램

- 명령과 데이터로 구성되어 저장 장치에 저장된 형태의 실행 코드 파일

## 프로세스

- 컴퓨터에서 연속적으로 실행되고 있는 컴퓨터 프로그램
- 운영체제로부터 시스템 자원을 할당받는 작업의 단위
- 어떠한 프로세스에는 최소한 하나의 스레드를 가지고 있음
- 안드로이드는 멀티스레드를 지원함

## 메인 스레드(UI스레드)

1. 첫 번째는 액티비티의 모든 라이프 사이클 관련 콜백 실행을 담당합니다.
2. 버튼, 에디트텍스트와 같은 UI 위젯을 사용한 사용자 이벤트와 UI 드로잉 이벤트를 담당합니다.

## 백그라운드 스레드

- 복잡한 연산이나 네트워크 작업, 데이터 베이스 작업을 해준다.

## 스레드 주의사항

- UI 작업은 메인 스레드에서만 접근 가능
- 백그라운드 스레드에서 UI를 바꾸려고 하면 에러가 난다.
- 따라서 다음과 같은 방법으로 바꿈

  1. 백그라운드 스레드에서 UI 스레드로 UI자원과 메세지를 전송

     - Handler 클래스
     - AsyncTask 클래스
     - runOnUiThread()

  2. UI스레드에서 UI자원으로 자원 변경 명령을 내리면 바뀜

## runOnUiThread()

```java
// Activity.java
public final void runOnUiThread(Runnable action) {
  if (Thread.currentThread() != mUiThread) {
    mHandler.post(action);
  } else {
    action.run();
  }
}
```

- ui스레드가 아니면 메세지 전송, ui스레드면 실행